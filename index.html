<!DOCTYPE html>
<html lang="en-us">
        <head>
                <meta charset="UTF-8">
                <title>authorAffiliations by rahulporuri</title>
                <meta name="viewport" content="width=device-width, initial-scale=1">
                <style>
                        .node {
                                stroke: #fff;
                                stroke-width: 1.5px;
                }
                        .link {
                                stroke: #999;
                                stroke-opacity: .6;
                }
                </style>
                <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
                <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
                <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
                <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
                <script type="text/javascript" src="d3.v3.js"></script>
        </head>

        <body> 
                <section class="page-header">
                        <h1 class="project-name">authorAffiliations</h1>
                        <h2 class="project-tagline">A network showing the affiliations of authors from papers scraped off of arXiv</h2>
                        <a href="https://github.com/rahulporuri/authorAffiliations" class="btn">View on GitHub</a>
                </section>

                <section class="main-content">
                        <h3>
                                <a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true">
                                        <span aria-hidden="true" class="octicon octicon-link"></span>
                                </a>Understanding the network of author affiliations.</h3>

                                <p>For those of you who frequent <a href="http://arxiv.org/">arXiv</a>, you would've noticed that 
                                papers published on arXiv also publish author affiliation information. I was intrigued at the 
                                prospect of scraping together such lists of author affiliations from papers published on arXiv 
                                that are related to astronomy. As you can notice in the line '9' of the highlighted code, to 
                                start with, I obtained the first 1000 such papers using arXiv's public API.</p>

                                <p> The code was written in Python, I 
                                used the <a href="https://networkx.github.io/">networkX</a> Python library to generate the graph and I
                                used <a href="https://d3js.org/">D3.js</a> to visualize the graph! I tried to visualize the graph 
                                using matplotlib and networkX and using the <a href="https://github.com/enthought/graphcanvas">
                                graphcanvas</a> library, neither of which attempts resulted in a graph that looks half as good as 
                                the one I made with d3!</p>

                                <p>To be a little more specific, the graph below is an undirected graph that just shows which all 
                                nodes are linked to which others! In reality, such a dataset is best represented using an edge-weighted 
                                graph that can denote how many times a specific edge is repeated in the dataset i.e how frequently 
                                people from the two universities collaborate and publish, on arXiv.</p>

                                <p>I've been working on and off this pet project for a while now and I think I'm going to take a 
                                break from it given that I feel like I've reached a safe point that I can resume from later on, 
                                when I have the time and resources! So, you're welcome to explore it, add to it, play around with it
                                and make additions/suggestions that you see fit. If you want to send them to me, you can open an 
                                issue in the Github repository <a href="https://github.com/rahulporuri/authorAffiliations/issues">here</a>.
                                If you are really interested, or bored, or whatever you want to call it, you can read about my thought 
                                process behind this pet project and about the progress I made 
                                <a href="http://rahulporuri.blogspot.in/2015/12/arxiv-author-affiliations-using-python.html">here</a>, 
                                <a href="http://rahulporuri.blogspot.in/2015/12/arxiv-author-affiliations-part-ii.html">here</a> and 
                                <a href=http://rahulporuri.blogspot.in/2016/04/arxiv-author-affiliations-using-python.html"">here</a>.</p>

                                <p>Last, but not the least, The embedded code was highlighted using <a href="hilite.me">hilite.me</a>.</p>

                                <p>Enough chit-chat. The graph you see below is interactive and you can drag nodes in the graph to move 
                                their network around. Hovering over a node will also show the name of the university representing the graph!
                                It is obvious at first glance that there are a lot of closed networks of 4/5/6 edges/universities but you 
                                can also see a big cluster with nodes that look like they're connecting various parts of the large cluster. 
                                Hover over them and you'll recognize them as some of the big universities, for example UCSD i.e 
                                U of California San Diego, NASA, Caltech, JHU i.e Johns Hopkins University and so on.</p>

                                <p><b><i>Note:</i></b> Install the relevant packages in Python, change the number of papers that you scrape 
                                off of arXiv be changing the last field in line 9 of the code and run the code yourselves to generate 
                                a larger, more connected graph! I would also like you pay attention to the charge parameter defined in the force 
                                attribute of the javascript! Take a look at the page source and you'll understand. The positions of various 
                                nodes in the graph are being autogenerated by D3 and it maintains <i>equilibrium</i> of the graph by 
                                using a pseudo charged-particles-in-a-box kind of approach where every node has a charge which dictates what 
                                the equilobrium distance between various nodes are! The reason I'm telling you all of these things is that 
                                when you try to generate your own graph, it might so happen that a few of the nodes go out of the canvas,
                                above and below, and become unreachable! To bring them back into the canvas, you will have to reduce 
                                the charge attribute I mentioned appropriately! </p>

                        <script type="text/javascript" src="d3.v3.js"></script>
                        <script>

var width = 1500,
    height = 900;

var color = d3.scale.category20();

var force = d3.layout.force()
    .charge(-70)
    .linkDistance(30)
    .size([width, height]);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

d3.json("force.json", function(error, graph) {
  if (error) throw error;

  force
      .nodes(graph.nodes)
      .links(graph.links)
      .start();

  var link = svg.selectAll(".link")
      .data(graph.links)
    .enter().append("line")
      .attr("class", "link")
      .style("stroke-width", function(d) { return Math.sqrt(d.value); });

  var node = svg.selectAll(".node")
      .data(graph.nodes)
    .enter().append("circle")
      .attr("class", "node")
      .attr("r", 5)
      .style("fill", function(d) { return color(d.group); })
      .call(force.drag);

  node.append("title")
      .text(function(d) { return d.name; });

  force.on("tick", function() {
    link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
  });
});

</script>
<!-- HTML generated using hilite.me -->
<div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
<table>
<tr>
<td>
<pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre>
</td>
<td>

<pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">json</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">urllib</span>

<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">networkx</span> <span style="color: #008800; font-weight: bold">as</span> <span style="color: #0e84b5; font-weight: bold">nx</span>
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">networkx.readwrite</span> <span style="color: #008800; font-weight: bold">import</span> json_graph
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">BeautifulSoup</span> <span style="color: #008800; font-weight: bold">import</span> BeautifulStoneSoup
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">matplotlib.pyplot</span> <span style="color: #008800; font-weight: bold">as</span> <span style="color: #0e84b5; font-weight: bold">plt</span>

url <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&#39;http://export.arxiv.org/api/query?search_query=all:astro&amp;start=0&amp;max_results=1000&#39;</span>
data <span style="color: #333333">=</span> urllib<span style="color: #333333">.</span>urlopen(url)<span style="color: #333333">.</span>read()
soup <span style="color: #333333">=</span> BeautifulStoneSoup(data)

test <span style="color: #333333">=</span> [tag <span style="color: #008800; font-weight: bold">for</span> tag <span style="color: #000000; font-weight: bold">in</span> soup<span style="color: #333333">.</span>findAll(<span style="background-color: #fff0f0">&#39;entry&#39;</span>)]

affiliationList <span style="color: #333333">=</span> []
<span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">range</span>(<span style="color: #007020">len</span>(test)):
            <span style="color: #008800; font-weight: bold">if</span> test[i]<span style="color: #333333">.</span>findAll(<span style="background-color: #fff0f0">&#39;arxiv:affiliation&#39;</span>) <span style="color: #333333">!=</span> []:
                                affiliationList<span style="color: #333333">.</span>append([tag<span style="color: #333333">.</span>string <span style="color: #008800; font-weight: bold">for</span> tag <span style="color: #000000; font-weight: bold">in</span> test[i]<span style="color: #333333">.</span>findAll(<span style="background-color: #fff0f0">&#39;arxiv:affiliation&#39;</span>)])

G <span style="color: #333333">=</span> nx<span style="color: #333333">.</span>Graph()

<span style="color: #008800; font-weight: bold">for</span> <span style="color: #007020">list</span> <span style="color: #000000; font-weight: bold">in</span> affiliationList:
    <span style="color: #008800; font-weight: bold">if</span> <span style="color: #007020">len</span>(<span style="color: #007020">list</span>) <span style="color: #333333">&gt;</span> <span style="color: #0000DD; font-weight: bold">5</span>:
        <span style="color: #008800; font-weight: bold">print</span> <span style="color: #007020">list</span>
        <span style="color: #008800; font-weight: bold">for</span> pos, node1 <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">enumerate</span>(<span style="color: #007020">list</span>):
            <span style="color: #008800; font-weight: bold">for</span> node2 <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">list</span>[pos:]:
                G<span style="color: #333333">.</span>add_edge(node1, node2)

<span style="color: #008800; font-weight: bold">for</span> n <span style="color: #000000; font-weight: bold">in</span> G:
        G<span style="color: #333333">.</span>node[n][<span style="background-color: #fff0f0">&#39;name&#39;</span>] <span style="color: #333333">=</span> n

pos <span style="color: #333333">=</span> nx<span style="color: #333333">.</span>spring_layout(G)
nx<span style="color: #333333">.</span>draw_networkx_nodes(G, pos, node_size<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">100</span>, node_color<span style="color: #333333">=</span><span style="background-color: #fff0f0">&#39;blue&#39;</span>)
nx<span style="color: #333333">.</span>draw_networkx_edges(G, pos, edge_color<span style="color: #333333">=</span><span style="background-color: #fff0f0">&#39;green&#39;</span>)
nx<span style="color: #333333">.</span>draw_networkx_labels(G, pos, font_color<span style="color: #333333">=</span><span style="background-color: #fff0f0">&#39;red&#39;</span>)

d <span style="color: #333333">=</span> json_graph<span style="color: #333333">.</span>node_link_data(G)
json<span style="color: #333333">.</span>dump(d, <span style="color: #007020">open</span>(<span style="background-color: #fff0f0">&#39;force.json&#39;</span>,<span style="background-color: #fff0f0">&#39;w&#39;</span>))

plt<span style="color: #333333">.</span>axis(<span style="background-color: #fff0f0">&#39;off&#39;</span>)
plt<span style="color: #333333">.</span>show()
</pre></td></tr></table></div>

                        <footer class="site-footer">
                                <span class="site-footer-owner"><a href="https://github.com/rahulporuri/authorAffiliations">authorAffiliations</a> is maintained by <a href="https://github.com/rahulporuri">rahulporuri</a>.</span>

                                <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
                        </footer>

                </section>
  
        </body>
</html>
